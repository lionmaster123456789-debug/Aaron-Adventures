<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>V6 Aaron Adventures - Over-The-Top Edition</title>
    <style>
        :root { --primary: #2ecc71; --bg: #050508; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: 'Orbitron', sans-serif; color: #fff; }
        canvas { display: block; filter: saturate(1.2) contrast(1.1); }
        
        #overlay { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, rgba(20,20,30,0.8) 0%, rgba(5,5,8,1) 100%); z-index: 100; transition: 0.5s; }
        
        .main-title { font-size: 80px; font-weight: 900; background: linear-gradient(to bottom, #fff, #444); -webkit-background-clip: text; -webkit-text-fill-color: transparent; filter: drop-shadow(0 0 20px rgba(255,255,255,0.3)); margin-bottom: 10px; letter-spacing: 15px; }
        
        .skin-vault { display: flex; gap: 25px; background: rgba(255,255,255,0.05); padding: 30px; border-radius: 20px; border: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); margin: 30px 0; }
        
        .skin-card { width: 80px; height: 100px; display: flex; flex-direction: column; align-items: center; justify-content: space-between; cursor: pointer; transition: 0.4s; position: relative; }
        .skin-preview { width: 50px; height: 50px; border-radius: 12px; border: 2px solid transparent; transition: 0.3s; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .skin-card.locked { opacity: 0.2; filter: grayscale(1); cursor: not-allowed; }
        .skin-card.selected .skin-preview { transform: scale(1.2) translateY(-10px); border-color: var(--primary); box-shadow: 0 0 25px var(--primary); }
        .skin-name { font-size: 10px; text-transform: uppercase; letter-spacing: 1px; color: #888; }
        
        .start-btn { background: #fff; color: #000; border: none; padding: 20px 60px; font-size: 24px; font-weight: bold; border-radius: 50px; cursor: pointer; transition: 0.3s; letter-spacing: 4px; }
        .start-btn:hover { background: var(--primary); color: #fff; box-shadow: 0 0 40px var(--primary); transform: scale(1.05); }

        #hud { position: absolute; top: 30px; left: 30px; z-index: 10; pointer-events: none; }
        .level-tag { font-size: 40px; font-weight: 900; opacity: 0.8; font-style: italic; }
    </style>
    <link href="https://fonts.googleapis.com" rel="stylesheet">
</head>
<body>

<div id="hud">
    <div class="level-tag">LEVEL <span id="lvlDisplay">1</span></div>
    <div id="biomeName" style="color: var(--primary); letter-spacing: 5px;">INITIALIZING...</div>
</div>

<div id="overlay">
    <div class="main-title">AARON</div>
    <div style="letter-spacing: 8px; color: #666; margin-bottom: 20px;">ADVENTURES</div>
    
    <div class="skin-vault" id="skinVault">
        <!-- Skins werden via JS generiert -->
    </div>
    
    <button class="start-btn" onclick="startGame()">ENTER WORLD</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
/**
 * AARON ADVENTURES - SUPREME GRAPHICS ENGINE
 * Logic & Rendering Pipeline
 */

const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
let width, height, cameraX = 0, currentLevel = 1;
let gameState = 'menu';
let selectedSkin = 0;

// Skin Database
const SKINS = [
    { name: "Ghost", color: "#f5f6fa", eye: "#2f3640", glow: "rgba(255,255,255,0.4)", trail: "#fff" },
    { name: "Neon-V", color: "#1e272e", eye: "#00d2d3", glow: "rgba(0,210,211,0.6)", trail: "#00d2d3" },
    { name: "Warlord", color: "#c23616", eye: "#fbc531", glow: "rgba(194,54,22,0.6)", trail: "#c23616" },
    { name: "Void", color: "#191919", eye: "#8c7ae6", glow: "rgba(140,122,230,0.5)", trail: "#8c7ae6" },
    { name: "Paladin", color: "#f9ca24", eye: "#ffffff", glow: "rgba(249,202,36,0.6)", trail: "#f9ca24" }
];

const BIOMES = [
    { name: "THE VOID", bg: "#050508", accent: "#333", fog: "#000" },
    { name: "NEON JUNGLE", bg: "#0a1a10", accent: "#2ecc71", fog: "#0a210f" },
    { name: "CRYSTAL PEAK", bg: "#0f171e", accent: "#00d2d3", fog: "#1e272e" },
    { name: "HELLGATE", bg: "#1a0808", accent: "#e74c3c", fog: "#2c0d0d" }
];

const player = { x: 150, y: 300, w: 48, h: 48, vx: 0, vy: 0, speed: 8, jump: -18, grounded: false, rot: 0 };
let platforms = [], hazards = [], particles = [], backgroundNodes = [];

function resize() {
    width = canvas.width = window.innerWidth;
    height = canvas.height = window.innerHeight;
}
window.onresize = resize;
resize();

// --- ENGINE CORE ---

function initLevel(lvl) {
    platforms = []; hazards = []; particles = []; backgroundNodes = [];
    player.x = 150; player.y = 300; player.vx = 0; player.vy = 0;
    cameraX = 0;

    const bIdx = Math.floor((lvl-1)/10) % BIOMES.length;
    const biome = BIOMES[bIdx];
    document.getElementById('lvlDisplay').innerText = lvl;
    document.getElementById('biomeName').innerText = biome.name;
    document.documentElement.style.setProperty('--primary', biome.accent);

    // Parallax Hintergrund
    for(let i=0; i<60; i++) {
        backgroundNodes.push({
            x: Math.random() * 8000,
            y: Math.random() * height,
            z: Math.random() * 0.5 + 0.1,
            size: Math.random() * 3 + 1,
            op: Math.random() * 0.5
        });
    }

    let lastX = 0, lastY = 550;
    // Start
    platforms.push({ x: 0, y: 550, w: 500, h: 150, type: 'start', color: biome.accent });

    for(let i=0; i<20 + lvl; i++) {
        let pW = 180 + Math.random() * 150;
        let pX = lastX + 160 + Math.random() * 120;
        let pY = lastY + (Math.random() * 200 - 100);
        pY = Math.max(250, Math.min(height-180, pY));

        let type = 'normal';
        if(Math.random() > 0.85) type = 'moving';
        if(Math.random() > 0.9) type = 'glitch';

        platforms.push({ x: pX, y: pY, w: pW, h: 40, type: type, oy: pY, off: Math.random()*10, color: (i%2==0 ? biome.accent : '#fff') });

        if(Math.random() > 0.6) {
            hazards.push({ 
                x: pX + pW/2, y: pY - 30, 
                type: Math.random() > 0.5 ? 'drone' : 'pulse', 
                t: Math.random()*100 
            });
        }
        lastX = pX; lastY = pY;
    }
    // Goal
    platforms.push({ x: lastX + 400, y: lastY - 50, w: 120, h: 500, type: 'goal' });
    renderSkinVault();
}

function renderSkinVault() {
    const vault = document.getElementById('skinVault');
    vault.innerHTML = '';
    const unlocked = Math.min(5, Math.floor((currentLevel-1)/5) + 1);
    
    SKINS.forEach((s, i) => {
        const card = document.createElement('div');
        card.className = `skin-card ${i >= unlocked ? 'locked' : ''} ${i === selectedSkin ? 'selected' : ''}`;
        card.innerHTML = `
            <div class="skin-preview" style="background:${s.color}"></div>
            <div class="skin-name">${s.name}</div>
        `;
        if(i < unlocked) card.onclick = () => { selectedSkin = i; renderSkinVault(); };
        vault.appendChild(card);
    });
}

// --- RENDERING PIPELINE ---

function draw() {
    const biome = BIOMES[Math.floor((currentLevel-1)/10) % BIOMES.length];
    
    // 1. Background Pass
    ctx.fillStyle = biome.bg;
    ctx.fillRect(0, 0, width, height);
    
    backgroundNodes.forEach(n => {
        ctx.fillStyle = `rgba(255,255,255,${n.op})`;
        let bx = (n.x - cameraX * n.z) % 3000;
        ctx.fillRect(bx, n.y, n.size, n.size);
    });

    // 2. Platform Pass
    platforms.forEach(p => {
        let px = p.x - cameraX;
        if(px + p.w < -100 || px > width + 100) return;

        if(p.type === 'moving') p.y = p.oy + Math.sin(Date.now()/500 + p.off) * 50;

        // Platform Style
        const grad = ctx.createLinearGradient(px, p.y, px, p.y + p.h);
        if(p.type === 'goal') {
            ctx.shadowBlur = 40; ctx.shadowColor = '#2ecc71';
            ctx.fillStyle = '#2ecc71';
        } else {
            grad.addColorStop(0, p.color);
            grad.addColorStop(1, '#000');
            ctx.fillStyle = grad;
        }

        ctx.beginPath();
        ctx.roundRect(px, p.y, p.w, p.h, 8);
        ctx.fill();
        
        // Edge Highlight
        ctx.strokeStyle = "rgba(255,255,255,0.3)";
        ctx.lineWidth = 1;
        ctx.strokeRect(px, p.y, p.w, 1);
        ctx.shadowBlur = 0;
    });

    // 3. Hazard Pass
    hazards.forEach(h => {
        let hx = h.x - cameraX;
        ctx.fillStyle = "#111";
        ctx.save();
        ctx.translate(hx, h.y);
        ctx.rotate(Date.now()/1000);
        // Drone Core
        ctx.shadowBlur = 15; ctx.shadowColor = "red";
        ctx.fillStyle = "#ff4757";
        ctx.beginPath();
        for(let i=0; i<4; i++) {
            ctx.rotate(Math.PI/2);
            ctx.fillRect(-15, -15, 10, 10);
        }
        ctx.restore();
    });

    // 4. Player Pass (High Detail)
    const skin = SKINS[selectedSkin];
    const targetRot = player.vx * 0.05;
    player.rot += (targetRot - player.rot) * 0.1;

    ctx.save();
    ctx.translate(player.x - cameraX + 24, player.y + 24);
    ctx.rotate(player.rot);
    
    // Glow Layer
    ctx.shadowBlur = 20;
    ctx.shadowColor = skin.glow;
    
    // Head Base
    ctx.fillStyle = skin.color;
    ctx.beginPath();
    ctx.roundRect(-24, -24, 48, 48, 14);
    ctx.fill();
    
    // Face Details (Serious)
    ctx.shadowBlur = 0;
    ctx.fillStyle = skin.eye;
    // Eyes
    ctx.fillRect(-16, -14, 12, 4);
    ctx.fillRect(6, -14, 12, 4);
    // Scar/Detail
    ctx.strokeStyle = "rgba(0,0,0,0.4)";
    ctx.beginPath(); ctx.moveTo(10, -20); ctx.lineTo(15, -5); ctx.stroke();
    
    ctx.restore();

    // 5. FX Pass (Particles)
    if(Math.abs(player.vx) > 1) {
        particles.push({ x: player.x+20, y: player.y+40, s: 5, l: 20, c: skin.trail });
    }
    particles.forEach((p, i) => {
        p.l--; p.y += 1;
        ctx.fillStyle = p.c;
        ctx.globalAlpha = p.l / 20;
        ctx.fillRect(p.x - cameraX, p.y, p.s, p.s);
        if(p.l <= 0) particles.splice(i, 1);
    });
    ctx.globalAlpha = 1;

    update();
    requestAnimationFrame(draw);
}

function update() {
    if(gameState !== 'playing') return;

    // Physics
    if(keys['ArrowLeft']) player.vx = -player.speed;
    else if(keys['ArrowRight']) player.vx = player.speed;
    else player.vx *= 0.85;

    player.vy += 0.8;
    player.x += player.vx;
    player.y += player.vy;

    cameraX += (player.x - cameraX - width/3) * 0.1;

    // Collision Logic
    player.grounded = false;
    platforms.forEach(p => {
        if(player.x + player.w > p.x && player.x < p.x + p.w && 
           player.y + player.h > p.y && player.y + player.h < p.y + p.h + 20 && player.vy >= 0) {
            
            if(p.type === 'goal') {
                currentLevel++;
                gameState = 'menu';
                document.getElementById('overlay').style.display = 'flex';
                initLevel(currentLevel);
                return;
            }
            player.y = p.y - player.h;
            player.vy = 0;
            player.grounded = true;
        }
    });

    // Death
    if(player.y > height + 200) initLevel(currentLevel);
    hazards.forEach(h => {
        if(Math.hypot(player.x+24 - h.x, player.y+24 - h.y) < 40) initLevel(currentLevel);
    });
}

const keys = {};
window.onkeydown = (e) => {
    keys[e.code] = true;
    if((e.code === 'ArrowUp' || e.code === 'Space') && player.grounded) player.vy = player.jump;
};
window.onkeyup = (e) => keys[e.code] = false;

function startGame() {
    document.getElementById('overlay').style.opacity = '0';
    setTimeout(() => {
        document.getElementById('overlay').style.display = 'none';
        if(gameState === 'menu') {
            gameState = 'playing';
            draw();
        }
    }, 500);
}

initLevel(1);
</script>
</body>
</html>
